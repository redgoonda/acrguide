<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ACRGuide ‚Äî Radiology Guidelines Calculator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    :root {
      --sidebar-w: 260px;
      --header-h: 56px;
    }

    body { overflow: hidden; }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    #header {
      position: fixed; top: 0; left: 0; right: 0; height: var(--header-h);
      background: #1a2035; z-index: 100;
      display: flex; align-items: center; padding: 0 1.25rem; gap: .75rem;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    #header .logo { font-size: 1.1rem; font-weight: 700; color: #e8f4fd; letter-spacing: .5px; }
    #header .subtitle { font-size: .78rem; color: #8fa9c0; }

    /* ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ */
    #sidebar {
      position: fixed; top: var(--header-h); left: 0; bottom: 0;
      width: var(--sidebar-w); overflow-y: auto;
      background: #1e2740;
      border-right: 1px solid rgba(255,255,255,.07);
    }
    .organ-group {}
    .organ-header {
      display: flex; align-items: center; gap: .55rem;
      padding: .65rem 1rem;
      font-size: .78rem; font-weight: 600; letter-spacing: .8px; text-transform: uppercase;
      color: #8fa9c0;
      cursor: pointer; user-select: none;
      border-bottom: 1px solid rgba(255,255,255,.05);
    }
    .organ-header:hover { color: #c8ddf0; background: rgba(255,255,255,.03); }
    .organ-header .organ-icon { font-size: 1rem; }
    .organ-header .chevron { margin-left: auto; transition: transform .2s; font-size: .7rem; }
    .organ-header.collapsed .chevron { transform: rotate(-90deg); }
    .organ-items { list-style: none; margin: 0; padding: 0; }
    .organ-items li a {
      display: block; padding: .45rem 1rem .45rem 2.2rem;
      font-size: .82rem; color: #7d9bbc; text-decoration: none;
      border-left: 2px solid transparent;
      transition: all .15s;
    }
    .organ-items li a:hover { color: #c8ddf0; background: rgba(255,255,255,.04); }
    .organ-items li a.active {
      color: #5bc0f8; border-left-color: #5bc0f8;
      background: rgba(91,192,248,.08); font-weight: 500;
    }

    /* ‚îÄ‚îÄ Main ‚îÄ‚îÄ */
    #main {
      margin-left: var(--sidebar-w);
      margin-top: var(--header-h);
      height: calc(100vh - var(--header-h));
      overflow-y: auto;
      background: #f0f4f9;
    }
    #content { max-width: 820px; margin: 0 auto; padding: 2rem 1.5rem 3rem; }

    /* ‚îÄ‚îÄ Welcome ‚îÄ‚îÄ */
    #welcome { text-align: center; padding: 4rem 2rem; }
    #welcome h2 { color: #1a2035; font-weight: 700; margin-bottom: .5rem; }
    #welcome p { color: #5c7a96; max-width: 480px; margin: 0 auto 1.5rem; }
    .organ-card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 1rem; max-width: 600px; margin: 0 auto; }
    .organ-card {
      background: #fff; border-radius: 12px; padding: 1.25rem .75rem;
      text-align: center; cursor: pointer; border: 1px solid #dee6ef;
      transition: all .2s; text-decoration: none; color: inherit;
    }
    .organ-card:hover { border-color: #5bc0f8; box-shadow: 0 4px 16px rgba(91,192,248,.2); color: inherit; }
    .organ-card .oc-icon { font-size: 2rem; margin-bottom: .4rem; }
    .organ-card .oc-name { font-size: .8rem; font-weight: 600; color: #2c4a6a; }

    /* ‚îÄ‚îÄ Guideline panel ‚îÄ‚îÄ */
    #guideline-panel { display: none; }
    .gl-header {
      background: #fff; border-radius: 12px; padding: 1.25rem 1.5rem;
      border: 1px solid #dee6ef; margin-bottom: 1rem;
    }
    .gl-header h4 { margin: 0 0 .2rem; color: #1a2035; font-weight: 700; }
    .gl-header .gl-meta { font-size: .78rem; color: #7a9ab5; }
    .gl-source-badge {
      display: inline-block; font-size: .72rem; padding: 2px 8px;
      border-radius: 20px; background: #e8f4fd; color: #2a6496; font-weight: 500;
    }

    .form-card {
      background: #fff; border-radius: 12px; padding: 1.5rem;
      border: 1px solid #dee6ef; margin-bottom: 1rem;
    }
    .form-card label { font-size: .84rem; font-weight: 500; color: #2c4a6a; margin-bottom: .3rem; }
    .form-card .form-text { font-size: .75rem; color: #7a9ab5; }
    .form-card .form-select, .form-card .form-control { font-size: .85rem; }
    .form-card .form-check-label { font-size: .83rem; }

    /* ‚îÄ‚îÄ Result ‚îÄ‚îÄ */
    #result-panel { display: none; }
    .result-card {
      border-radius: 12px; padding: 1.5rem;
      border: 1px solid #dee6ef; margin-bottom: 1rem;
    }
    .result-green  { background: #f0faf3; border-color: #4caf86; }
    .result-yellow { background: #fffbf0; border-color: #f0a500; }
    .result-orange { background: #fff5ee; border-color: #e0763a; }
    .result-red    { background: #fff2f2; border-color: #d94f4f; }
    .result-blue   { background: #f0f8ff; border-color: #3a8fd9; }

    .result-badge {
      display: inline-block; font-size: .72rem; padding: 3px 10px;
      border-radius: 20px; font-weight: 600; letter-spacing: .3px; margin-bottom: .5rem;
    }
    .badge-green  { background: #d4f1e4; color: #1a6b42; }
    .badge-yellow { background: #fff0c2; color: #805700; }
    .badge-orange { background: #ffe5d0; color: #8a3a00; }
    .badge-red    { background: #ffd9d9; color: #8b0000; }
    .badge-blue   { background: #d0e9ff; color: #0d4f8a; }

    .result-recommendation { font-size: 1.05rem; font-weight: 600; color: #1a2035; margin-bottom: .75rem; }
    .result-notes { font-size: .82rem; color: #4a6a82; }
    .result-notes ul { padding-left: 1.2rem; margin: .4rem 0 0; }
    .result-notes li { margin-bottom: .25rem; }

    .sub-result { background: #f8fafc; border-radius: 8px; padding: .9rem 1rem; margin-top: .75rem; border: 1px solid #d0dce8; }
    .sub-result-title { font-size: .76rem; font-weight: 600; color: #5c7a96; text-transform: uppercase; letter-spacing: .5px; margin-bottom: .3rem; }

    /* scrollbar */
    #sidebar::-webkit-scrollbar { width: 4px; }
    #sidebar::-webkit-scrollbar-thumb { background: rgba(255,255,255,.15); border-radius: 2px; }
    #main::-webkit-scrollbar { width: 6px; }
    #main::-webkit-scrollbar-thumb { background: #c8d8e8; border-radius: 3px; }

    .calc-btn { min-width: 140px; }
    .reset-btn { font-size: .8rem; }

    /* ‚îÄ‚îÄ Two-column layout with criteria panel ‚îÄ‚îÄ */
    .gl-body { display: flex; gap: 1.25rem; align-items: flex-start; }
    .gl-form-col { flex: 1; min-width: 0; }
    #content.has-criteria { max-width: 1160px; }

    #criteria-panel {
      width: 330px; flex-shrink: 0;
      position: sticky; top: 0;
      max-height: calc(100vh - var(--header-h) - 4rem);
      overflow-y: auto;
      display: none;
    }
    #criteria-panel::-webkit-scrollbar { width: 3px; }
    #criteria-panel::-webkit-scrollbar-thumb { background: #c8d8e8; border-radius: 2px; }

    .criteria-card { background: #fff; border-radius: 12px; border: 1px solid #dee6ef; overflow: hidden; }
    .criteria-hdr {
      background: #1e2740; color: #c8ddf0;
      padding: .65rem 1rem;
      font-size: .73rem; font-weight: 700; text-transform: uppercase; letter-spacing: .7px;
      display: flex; align-items: center; gap: .4rem;
    }
    .crit-section { border-bottom: 1px solid #eef2f7; }
    .crit-section:last-child { border-bottom: none; }
    .crit-section-title {
      font-size: .69rem; font-weight: 700; color: #7a9ab5;
      text-transform: uppercase; letter-spacing: .6px;
      padding: .55rem 1rem .1rem;
    }
    .crit-item { padding: .45rem 1rem .5rem; border-bottom: 1px solid #f5f7fa; }
    .crit-item:last-child { border-bottom: none; }
    .crit-item-top { display: flex; align-items: baseline; gap: .4rem; margin-bottom: .18rem; }
    .crit-item-label { font-size: .8rem; font-weight: 600; color: #1a2035; }
    .crit-risk {
      font-size: .66rem; padding: 1px 6px; border-radius: 10px;
      font-weight: 600; margin-left: auto; white-space: nowrap; flex-shrink: 0;
    }
    .cr-green  { background: #d4f1e4; color: #1a6b42; }
    .cr-yellow { background: #fff0c2; color: #805700; }
    .cr-orange { background: #ffe5d0; color: #8a3a00; }
    .cr-red    { background: #ffd9d9; color: #8b0000; }
    .cr-blue   { background: #d0e9ff; color: #0d4f8a; }
    .cr-grey   { background: #e8edf2; color: #4a6a82; }
    .crit-item-desc { font-size: .74rem; color: #4a6a82; line-height: 1.5; }
  </style>
</head>
<body>

<!-- Header -->
<div id="header">
  <i class="bi bi-radioactive text-info fs-5"></i>
  <div>
    <div class="logo">ACRGuide</div>
    <div class="subtitle">Radiology Guidelines Calculator</div>
  </div>
</div>

<!-- Sidebar -->
<nav id="sidebar">

  <div class="organ-group">
    <div class="organ-header" data-target="lung-items">
      <span class="organ-icon">ü´Å</span> Lung
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="lung-items">
      <li><a href="#" data-gl="fleischner_solid">Fleischner ‚Äî Solid Nodule</a></li>
      <li><a href="#" data-gl="fleischner_subsolid">Fleischner ‚Äî Subsolid / GGN</a></li>
      <li><a href="#" data-gl="lungrads">Lung-RADS 2022</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="thyroid-items">
      <span class="organ-icon">ü¶ã</span> Thyroid
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="thyroid-items">
      <li><a href="#" data-gl="tirads">ACR TI-RADS</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="kidney-items">
      <span class="organ-icon">ü´ò</span> Kidney
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="kidney-items">
      <li><a href="#" data-gl="bosniak">Bosniak Classification 2019</a></li>
      <li><a href="#" data-gl="renal_mass">Renal Mass ‚Äî ACR White Paper</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="liver-items">
      <span class="organ-icon">ü´Ä</span> Liver
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="liver-items">
      <li><a href="#" data-gl="lirads">LI-RADS v2018</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="adrenal-items">
      <span class="organ-icon">‚öôÔ∏è</span> Adrenal
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="adrenal-items">
      <li><a href="#" data-gl="adrenal">Adrenal Incidentaloma</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="pancreas-items">
      <span class="organ-icon">ü•û</span> Pancreas
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="pancreas-items">
      <li><a href="#" data-gl="pancreatic_cyst">Pancreatic Cyst (ACR 2022)</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="breast-items">
      <span class="organ-icon">ü©∫</span> Breast
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="breast-items">
      <li><a href="#" data-gl="birads">ACR BI-RADS</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="ovary-items">
      <span class="organ-icon">üîµ</span> Ovary
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="ovary-items">
      <li><a href="#" data-gl="orads">ACR O-RADS</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="prostate-items">
      <span class="organ-icon">üî∑</span> Prostate
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="prostate-items">
      <li><a href="#" data-gl="pirads">PI-RADS v2.1</a></li>
    </ul>
  </div>

  <div class="organ-group">
    <div class="organ-header" data-target="spine-items">
      <span class="organ-icon">ü¶¥</span> Spine / MSK
      <i class="bi bi-chevron-down chevron"></i>
    </div>
    <ul class="organ-items" id="spine-items">
      <li><a href="#" data-gl="incidental_vertebral">Incidental Vertebral Fracture</a></li>
      <li><a href="#" data-gl="incidental_disc">Incidental Disc Finding</a></li>
    </ul>
  </div>

</nav>

<!-- Main -->
<div id="main">
  <div id="content">

    <!-- Welcome -->
    <div id="welcome">
      <h2>Radiology Guidelines Calculator</h2>
      <p>Select an organ system from the sidebar to access evidence-based guidelines with automated follow-up recommendations.</p>
      <div class="organ-card-grid">
        <a class="organ-card" href="#" data-gl="fleischner_solid">
          <div class="oc-icon">ü´Å</div><div class="oc-name">Lung</div>
        </a>
        <a class="organ-card" href="#" data-gl="tirads">
          <div class="oc-icon">ü¶ã</div><div class="oc-name">Thyroid</div>
        </a>
        <a class="organ-card" href="#" data-gl="bosniak">
          <div class="oc-icon">ü´ò</div><div class="oc-name">Kidney</div>
        </a>
        <a class="organ-card" href="#" data-gl="lirads">
          <div class="oc-icon">ü´Ä</div><div class="oc-name">Liver</div>
        </a>
        <a class="organ-card" href="#" data-gl="adrenal">
          <div class="oc-icon">‚öôÔ∏è</div><div class="oc-name">Adrenal</div>
        </a>
        <a class="organ-card" href="#" data-gl="pancreatic_cyst">
          <div class="oc-icon">ü•û</div><div class="oc-name">Pancreas</div>
        </a>
        <a class="organ-card" href="#" data-gl="birads">
          <div class="oc-icon">ü©∫</div><div class="oc-name">Breast</div>
        </a>
        <a class="organ-card" href="#" data-gl="pirads">
          <div class="oc-icon">üî∑</div><div class="oc-name">Prostate</div>
        </a>
      </div>
    </div>

    <!-- Guideline Panel -->
    <div id="guideline-panel">
      <div class="gl-header">
        <h4 id="gl-title"></h4>
        <div class="gl-meta">
          <span class="gl-source-badge" id="gl-source"></span>
          <span class="ms-2 text-muted" id="gl-desc" style="font-size:.82rem;"></span>
        </div>
      </div>

      <div class="gl-body">
        <div class="gl-form-col">
          <div class="form-card">
            <form id="gl-form" novalidate></form>
            <div class="mt-3 d-flex gap-2 align-items-center">
              <button type="button" class="btn btn-primary calc-btn" id="calc-btn">
                <i class="bi bi-calculator me-1"></i> Calculate
              </button>
              <button type="button" class="btn btn-outline-secondary reset-btn" id="reset-btn">
                <i class="bi bi-arrow-counterclockwise me-1"></i> Reset
              </button>
            </div>
          </div>

          <div id="result-panel">
            <div id="result-card" class="result-card">
              <div id="result-badge" class="result-badge"></div>
              <div id="result-recommendation" class="result-recommendation"></div>
              <div id="result-notes" class="result-notes"></div>
              <div id="result-extra"></div>
            </div>
          </div>
        </div>

        <div id="criteria-panel">
          <!-- populated by JS -->
        </div>
      </div>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
window.onerror = function(msg, src, line, col, err) {
  var d = document.getElementById('js-error-banner');
  if (!d) {
    d = document.createElement('div');
    d.id = 'js-error-banner';
    d.style.cssText = 'position:fixed;bottom:0;left:0;right:0;background:#c0392b;color:#fff;padding:10px 16px;z-index:9999;font-size:13px;font-family:monospace;';
    document.body.appendChild(d);
  }
  d.textContent = 'JS Error: ' + msg + ' (line ' + line + ')';
  return false;
};
</script>
<script src="/static/app.js"></script>
</body>
</html>
